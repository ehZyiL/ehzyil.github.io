---
title: 'Linux下如何查看CPU使用率'
author: ehzyil
tags:
  - Linux
categories:
  - Linux
date: 2024-3-22
---

# Linux下如何查看CPU使用率
在Linux环境下，我们有多种命令和工具可以用于查看CPU使用率和系统资源使用情况。以下是几种常用方法：
## 一、使用top命令查看Linux资源占用情况
`top`命令可以实时动态地查看运行中的系统状态，包括系统任务、系统负载、运行队列、活动进程等信息。它是Linux下常用的查看cpu使用情况的命令。使用时，在终端里输入`top`，然后按回车，就可以看到CPU、内存、任务等资源占用情况。
| 列名    | 含义                                                    |
| ------- | ------------------------------------------------------- |
| PID     | 进程标识号                                              |
| USER    | 进程所有者                                              |
| PR      | 进程优先级                                              |
| NI      | 进程优先级别数值                                        |
| VIRT    | 进程占用的虚拟内存值                                    |
| RES     | 进程占用的物理内存值                                    |
| SHR     | 进程使用的共享内存值                                    |
| S       | 进程的状态，其中S表示休眠，R表示正在运行，Z表示僵死状态 |
| %CPU    | 进程占用的CPU使用率                                     |
| %MEM    | 进程占用的物理内存百分比                                |
| TIME+   | 进程启动后占用的总的CPU时间                             |
| Command | 进程启动的启动命令名称                                  |
## 二、使用free命令查看内存使用情况
 `free`命令可以查看和监控系统的物理内存、交换空间以及内核缓冲的使用情况。在终端输入`free`命令，可以看到总内存、已用内存、空闲内存等情况。

## 三、使用ps命令查看各进程CPU使用情况
ps命令是Linux下最常用的查看进程状态的命令，它可以查看系统上所有的进程信息，包括进程的PID、TTY、时间、命令等。
```
ps ux

ps -H -eo user,pid,ppid,tid,time,%cpu,cmd --sort=%cpu
```
上述命令：第一条按默认方式查看状态，第二条命令指定显示列和排序方式，使用时任选其一。



> 使用ps命令查看各进程内存使用情况，你可以使用以下的命令：
>
> ```bash
> ps -eo pid,user,%mem,vsz,rss,cmd --sort=-%mem
> ```
>
> 这个命令的各个部分的含义是：
>
> - `ps`：ps命令用于报告当前系统的进程状态。
> - `-eo`：选择输出的格式，后面跟着的是你想要输出的选项。
> - `pid,user,%mem,vsz,rss,cmd`：这里定义了你要输出的列。其中，“pid”显示进程ID，“user”显示用户名，“%mem”显示进程使用的物理内存的百分比，“vsz”显示虚拟内存的大小， “rss”显示驻留内存的大小，"cmd"则显示了执行命令的完整路径。
> - `--sort=-%mem`：这个选项让ps命令按照内存使用量的百分比降序排序输出的进程。

## 四、定位CPU高占用问题的方法
如果系统的CPU使用率过高，会导致系统响应变慢，这时就需要找出并分析是哪些进程在占用过多的CPU资源。首先，我们可以用`top`命令或`ps`命令查看各进程的CPU使用情况，找出CPU使用率过高的那个进程，获取到该进程的PID。然后，我们可以使用以下命令查看该进程正在使用的文件：
```
ll /proc/PID/fd
```
其中，PID应该替换为实际查询到的高占用CPU的进程的编号。通过以上命令能找到高占用CPU的进程与其调用的文件之间的关系，接下来就是分析这些文件，找出问题的所在。 

以上就是在Linux下查看CPU使用率以及处理CPU占用问题的一些基本方法，对于Linux用户和开发者来说，这些命令和工具的使用技巧是需要掌握的基本技能。希望本文能对你有所帮助。

